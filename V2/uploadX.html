<!-- I'm Mr. Beez Neez look at me! -->
<!-- I was once like you until I took an arrow to the bee -->
<!DOCTYPE html>
<html>
<head>
<style>
table, th, td {
    border: 1px solid black;
}
</style>
</head>
<body>

<table id = "events" style="width:100%">
    <tr>
        <th>Event</th>
        <th>Sent</th>
        <th>Submit</th>
    </tr>
</table>

<table id = "send_messages" style="width:100%">

</table>

</body>

<script>
  data = [1, 3, 2, 5, 4, 7, 6, 9, 8, 10];
  window.onload = function() {

    generateLocalStorage();

    table = document.getElementById("events");

    for(var key in localStorage) {

      try {
        key = JSON.parse(localStorage.getItem(key));
        console.log(key);
        match = key.Match;
      } catch(err) {
        console.log("Non match");
        continue;
      }

      console.log("Good");
      row = table.insertRow(-1);

      row.id = "row-" + match.toString();

      number = row.insertCell(-1);
      submitted = row.insertCell(-1);
      submit = row.insertCell(-1);

      number.innerHTML = match;
      submitted.innerHTML = "False";
      submit.innerHTML = "<button id=\"" + match + "\" onclick=\"sendData(" + match + ");\">Submit</button>";
    }

  };

  function generateLocalStorage() {
    localStorage.clear();

  	localStorage.matchschedule = [{"match": 1}, {"match": 2}];

    for(i = 0; i < data.length; i++) {
      localStorage.setItem(data[i].toString(),  '{"Match":"' + data[i].toString() + '", "Team":"1983"}');
    }
  }

  function sendData(match) {
    table = document.getElementById("send_messages");
    row = table.insertRow(-1);

    row.innerHTML = "<p>Data sent for match " + match.toString() + ".</p>"; //not really

    row = document.getElementById("row-" + match.toString());
    row.parentNode.removeChild(row);
  }

</script>
</html>
