<!-- I'm Mr. Beez Neez look at me! -->
<!-- I was once like you until I took an arrow to the bee -->
<!DOCTYPE html>
<html>
<head>
<style>
table, th, td {
    border: 1px solid black;
}
</style>
</head>
<body>

<table id = "events" style="width:100%">
    <tr>
        <th>Event</th>
        <th>Sent</th>
        <th>Submit</th>
    </tr>
</table>

<table id = "send_messages" style="width:100%">

</table>

</body>

<script>

  window.onload = function() {

    table = document.getElementById("events");

    for (var key in localStorage) {
      try {
        key = JSON.parse(localStorage.getItem(key));
        isTele = key.isTele;
        console.log(key);
      } catch(err) {
        console.log("Non-match");
        continue;
      }

      console.log("Good Match");
      row = table.insertRow(-1);

      row.id = "row-" + name.toString();

      number = row.insertCell(-1);
      submitted = row.insertCell(-1);
      submit = row.insertCell(-1);

      number.innerHTML = name;
      submitted.innerHTML = "False";
      submit.innerHTML = "<button id=\"" + name + "\" onclick=\"sendData(" + name + ");\">Submit</button>";
    }


    // for(var key in localStorage) {
    //
    //   try {
    //     key = JSON.parse(localStorage.getItem(key));
    //     console.log(key);
    //     match = key.Match;
    //   } catch(err) {
    //     console.log("Non match");
    //     continue;
    //   }
    //
    //   console.log("Good");
    //   row = table.insertRow(-1);
    //
    //   row.id = "row-" + match.toString();
    //
    //   number = row.insertCell(-1);
    //   submitted = row.insertCell(-1);
    //   submit = row.insertCell(-1);
    //
    //   number.innerHTML = match;
    //   submitted.innerHTML = "False";
    //   submit.innerHTML = "<button id=\"" + match + "\" onclick=\"sendData(" + match + ");\">Submit</button>";
    // }

  };

  function sendData(name) {
    table = document.getElementById("send_messages");
    row = table.insertRow(-1);

    row.innerHTML = "<p>Data sent for match " + name.toString() + ".</p>"; //not really

    row = document.getElementById("row-" + name.toString());
    row.parentNode.removeChild(row);
  }

</script>
</html>
